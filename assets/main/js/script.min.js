import{preloadImages}from"../../libs/utils.js";let lenis;function customDropdown(){let a=$(".dropdown-custom");a.each(function(){let t=$(this),i=t.find(".dropdown-custom__btn"),o=t.find(".dropdown-custom__menu");var e=t.find(".dropdown-custom__item");let s=t.find(".dropdown-custom__text");function n(i){$(".dropdown-custom__btn").removeClass("active"),a.each(function(){var e=$(this).find(".dropdown-custom__menu"),t=$(this).find(".dropdown-custom__btn");i&&$(this).is(i)||(e.removeClass("dropdown--active"),t.removeClass("--active"))})}i.on("click",function(e){e.stopPropagation(),n(t),o.toggleClass("dropdown--active"),i.toggleClass("--active")}),$(document).on("click",function(){n()}),e.on("click",function(e){e.stopPropagation();e=$(this);let t=s.text();var i=s.find("img").attr("src"),o=e.find("img");s.text(e.text()),o.length?(s.html(e.html()),e.hasClass("language__item")&&(t=`<span>${t}</span>`),e.html(`${i?`<img src="${i}" />`:""} `+t)):e.hasClass("language__item")&&e.text(t),n()})})}function header(){var e=$(".header-hambuger");let t=$(".header-sub-container"),i=$(".header-sub"),o=$(".header-icon-close"),s=$("body");var n=$(".header-sub-empty");e.on("click",function(){$(this).addClass("active"),i.addClass("active"),s.addClass("overflow-hidden"),setTimeout(function(){t.addClass("active")},100)}),o.on("click",function(){t.removeClass("active"),setTimeout(function(){o.removeClass("active"),i.removeClass("active"),s.removeClass("overflow-hidden")},300)}),n.on("click",function(){t.removeClass("active"),setTimeout(function(){o.removeClass("active"),i.removeClass("active"),s.removeClass("overflow-hidden")},300)})}function effectText(){gsap.registerPlugin(SplitText,ScrollTrigger),document.fonts.ready.then(()=>{document.querySelectorAll(".effect-heading-mask-line").forEach(t=>{gsap.set(t,{opacity:1});let i;SplitText.create(t,{type:"words,lines",linesClass:"line",mask:"lines",onSplit:e=>(t.classList.contains("scroll-trigger")?i=gsap.from(e.lines,{duration:.4,yPercent:100,opacity:0,stagger:.1,ease:"expo.out",scrollTrigger:{trigger:t,start:"top 60%",end:"bottom 60%",toggleActions:"play none none none"}}):(i=gsap.from(e.lines,{duration:.4,yPercent:100,opacity:0,stagger:.1,ease:"expo.out"}),gsap.to(i,{timeScale:.2,onStart:()=>i.play(0)})),i)})}),gsap.utils.toArray(".effect-fade-content").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.3,ease:"sine.out"})}),document.querySelectorAll(".effect-heading-blur").forEach(e=>{var t=SplitText.create(e,{type:"words, chars",charsClass:"split-char",wordsClass:"split-word"});gsap.fromTo(t.chars,{filter:"blur(10px) ",y:10,willChange:"filter, transform",opacity:0},{ease:"none",filter:"blur(0px)",y:0,stagger:.05,opacity:1,scrollTrigger:{trigger:e.classList.contains("footer-effect-text")?".footer-ovl":e,start:"top 90%"}})})})}function sectionSpecialize(){if(!($(".section-specialize").length<1)){gsap.fromTo(".section-specialize .image",{scale:.5},{scale:1,scrollTrigger:{trigger:".section-specialize",start:"center bottom",end:"bottom bottom",scrub:!0},ease:"none"}),gsap.to(".specialize-main-slider",{xPercent:-160,scrollTrigger:{trigger:".section-specialize",start:"top 20%",end:"bottom 20%",scrub:!0,onEnter:()=>{$(".section-specialize").addClass("theme-light"),$("main").addClass("theme-light")},onLeaveBack:()=>{$("main").removeClass("theme-light"),$(".section-specialize").removeClass("theme-light")}},ease:"none"});let e=!1;ScrollTrigger.create({trigger:".section-specialize",start:"top 15%",once:!0,onEnter:()=>{e||($(".section-specialize .number").each(function(){$(this).find("span[data-value]").each(function(){var e=parseInt($(this).attr("data-value"))+1;$(this).css("transform",`translateY(-${100*e}%)`)})}),e=!0)}}),$(".section-specialize .number").each(function(){let i=$(this);let e=/(\D+)?(\d+(\.\d+)?)(\D+)?/.exec(i.text());e&&(e.shift(),e=e.filter(e=>null!=e),i.empty(),e.forEach(t=>{if(isNaN(t))i.append(`<span>${t}</span>`);else for(let e=0;e<t.length;e++)i.append(`
            <span data-value="${t[e]}">
              <span>&nbsp;</span>
              ${Array(parseInt(t[e])+1).join(0).split(0).map((e,t)=>`<span>${t}</span>`).join("")}
            </span>
          `)}))})}}function introChess(){if(!($(".section-intro").length<1)){gsap.registerPlugin(ScrollTrigger);let e=document.getElementById("canvas-chess"),a=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,window.addEventListener("resize",function(){e.width=window.innerWidth,e.height=window.innerHeight,i()});let r=[],c={frame:1};for(let e=1;e<70;e++){var t=new Image;t.src=`./assets/images/img-chess/chess-${(e+1).toString()}.jpg`,r.push(t)}function i(){var e,t,i,o,s,n;e=r[c.frame],t=a,i=t.canvas,o=i.width/e.width,s=i.height/e.height,o=Math.max(o,s),s=(i.width-e.width*o)/2,n=(i.height-e.height*o)/2,t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0,e.width,e.height,s,n,e.width*o,e.height*o)}gsap.to(c,{frame:69,snap:"frame",ease:"none",scrollTrigger:{scrub:1,trigger:"#canvas-chess",start:"top top",end:"100% top"},onUpdate:i}),r[1].onload=i,gsap.to(".section-intro",{scrollTrigger:{trigger:".section-intro",start:"top top",end:"bottom top",pin:!0,markers:!0}})}}let init=()=>{gsap.registerPlugin(ScrollTrigger),header(),customDropdown(),sectionSpecialize(),effectText(),introChess()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});