import{preloadImages}from"../../libs/utils.js";function sectionSpecialize(){if(!($(".section-specialize").length<1)){gsap.fromTo(".section-specialize .image",{scale:.5},{scale:1,scrollTrigger:{trigger:".section-specialize",start:"center bottom",end:"bottom bottom",scrub:!0},ease:"none"});var t=991<$(window).width()?"top 50%":"top 10%",r=991<$(window).width()?"bottom 20%":"bottom 70%";gsap.to(".specialize-main-slider",{xPercent:-160,scrollTrigger:{trigger:".section-specialize",start:t,end:r,scrub:!0,onEnter:()=>{$(".section-specialize").addClass("theme-light"),$("main").addClass("theme-light")},onLeaveBack:()=>{$("main").removeClass("theme-light"),$(".section-specialize").removeClass("theme-light")}},ease:"none"});let e=!1;ScrollTrigger.create({trigger:".section-specialize",start:"top 15%",once:!0,onEnter:()=>{e||($(".section-specialize .number").each(function(){$(this).find("span[data-value]").each(function(){var e=parseInt($(this).attr("data-value"))+1;$(this).css("transform",`translateY(-${100*e}%)`)})}),e=!0)}}),$(".section-specialize .number").each(function(){let r=$(this);let e=/(\D+)?(\d+(\.\d+)?)(\D+)?/.exec(r.text());e&&(e.shift(),e=e.filter(e=>null!=e),r.empty(),e.forEach(t=>{if(isNaN(t))r.append(`<span>${t}</span>`);else for(let e=0;e<t.length;e++)r.append(`
            <span data-value="${t[e]}">
              <span>&nbsp;</span>
              ${Array(parseInt(t[e])+1).join(0).split(0).map((e,t)=>`<span>${t}</span>`).join("")}
            </span>
          `)}))})}}function clientInsight(){if(!($(".client-insight").length<1||$(window).width()<992)){let n=document.querySelector(".client-wrapper"),a=document.querySelector(".main-section"),s=0,o=!1;a.addEventListener("mouseenter",()=>{o=!0}),a.addEventListener("mouseleave",()=>{o=!1,n.style.transform="translateX(0px)"}),a.addEventListener("mousemove",e=>{var t,r,i;e=e,o&&(t=a.offsetWidth,r=n.scrollWidth-t+80,i=a.getBoundingClientRect(),e=e.clientX-i.left,s=t-200<=e?-r:Math.min(0,e/(t-200)*r*-1),s=Math.max(-r,Math.min(0,s)),n.style.transform=`translateX(${s}px)`)})}}function gsapExpertise(){var e=document.querySelectorAll(".wrapper-expertise");e.length&&e.forEach((n,e)=>{let t=n.querySelector(".expertise");if(t){let i=()=>{var e=n.querySelectorAll(".expertise-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)};s=t.scrollWidth,o=window.innerWidth<1600?150:250;var a,s=s-window.innerWidth+o+100,o=((e=>{let t=n.nextElementSibling;t&&t.classList.contains("expertise-spacer")||((t=document.createElement("div")).classList.add("expertise-spacer"),n.insertAdjacentElement("afterend",t));var r=i();t.style.height=Math.max(r,e)+"px"})(s),o=t,gsap.to(o,{x:-s,duration:3,ease:"none"}));a=991<window.innerWidth,ScrollTrigger.create({trigger:n,start:"top 20%",end:"+="+s,pin:a,animation:o,scrub:1,pinSpacing:!1,invalidateOnRefresh:!0,id:"expertiseScroll-"+e});let r=ScrollTrigger.getById("expertiseScroll-"+e);r&&gsap.utils.toArray(n.querySelectorAll(".expertise-item:not(.item-title-large)")).forEach(e=>{var t=e.querySelector(".item-content");t&&(991<window.innerWidth?gsap.fromTo(t,{yPercent:70},{yPercent:0,ease:"none",scrollTrigger:{trigger:e,containerAnimation:r.animation,start:"left 80%",end:"center 60%",scrub:!0,invalidateOnRefresh:!0}}):gsap.fromTo(t,{yPercent:70},{yPercent:0,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"center 60%",scrub:!0,invalidateOnRefresh:!0}}))})}})}function brandingAnimation(){var e,t;$(".branding-wrapper").length&&(e=gsap.utils.toArray(".branding-wrapper .item"),t=window.innerWidth<=991,gsap.set(e,{yPercent:50,opacity:0}),t?e.forEach((e,t)=>{gsap.to(e,{yPercent:0,opacity:1,duration:1,ease:"none",scrollTrigger:{trigger:e,start:"top bottom+=130px",end:"bottom bottom+=130px"}})}):gsap.timeline({scrollTrigger:{trigger:".branding-wrapper",start:"top 85%",end:"bottom 70%",scrub:1}}).to(e,{yPercent:0,opacity:1,duration:1.5,ease:"power2.out",stagger:.1}))}$=jQuery;let init=()=>{gsap.registerPlugin(ScrollTrigger),gsapExpertise(),sectionSpecialize(),clientInsight(),brandingAnimation(),ScrollTrigger.refresh()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});