import{preloadImages}from"../../libs/utils.js";function sectionSpecialize(){if(!($(".section-specialize").length<1)){gsap.fromTo(".section-specialize .image",{scale:.5},{scale:1,scrollTrigger:{trigger:".section-specialize",start:"center bottom",end:"bottom bottom",scrub:!0},ease:"none"}),gsap.to(".specialize-main-slider",{xPercent:-160,scrollTrigger:{trigger:".section-specialize",start:"top 20%",end:"bottom 20%",scrub:!0,onEnter:()=>{$(".section-specialize").addClass("theme-light"),$("main").addClass("theme-light"),$(".header-menu-container").addClass("theme-light")},onLeaveBack:()=>{$("main").removeClass("theme-light"),$(".section-specialize").removeClass("theme-light"),$(".header-menu-container").removeClass("theme-light")}},ease:"none"});let e=!1;ScrollTrigger.create({trigger:".section-specialize",start:"top 15%",once:!0,onEnter:()=>{e||($(".section-specialize .number").each(function(){$(this).find("span[data-value]").each(function(){var e=parseInt($(this).attr("data-value"))+1;$(this).css("transform",`translateY(-${100*e}%)`)})}),e=!0)}}),$(".section-specialize .number").each(function(){let i=$(this);let e=/(\D+)?(\d+(\.\d+)?)(\D+)?/.exec(i.text());e&&(e.shift(),e=e.filter(e=>null!=e),i.empty(),e.forEach(t=>{if(isNaN(t))i.append(`<span>${t}</span>`);else for(let e=0;e<t.length;e++)i.append(`
            <span data-value="${t[e]}">
              <span>&nbsp;</span>
              ${Array(parseInt(t[e])+1).join(0).split(0).map((e,t)=>`<span>${t}</span>`).join("")}
            </span>
          `)}))})}}function clientInsight(){if(!($(".client-insight").length<1)){let r=document.querySelector(".client-wrapper"),a=document.querySelector(".main-section"),s=0,l=!1;a.addEventListener("mouseenter",()=>{l=!0}),a.addEventListener("mouseleave",()=>{l=!1,r.style.transform="translateX(0px)"}),a.addEventListener("mousemove",e=>{var t,i,n;e=e,l&&(t=a.offsetWidth,i=r.scrollWidth-t+80,n=a.getBoundingClientRect(),e=e.clientX-n.left,s=t-200<=e?-i:Math.min(0,e/(t-200)*i*-1),s=Math.max(-i,Math.min(0,s)),r.style.transform=`translateX(${s}px)`)})}}function gsapExpertise(){var e=$(".wrapper-expertise");if(0<e.length){e.each(function(e,t){let i=$(t).find(".expertise");var n=i[0].scrollWidth-window.innerWidth+200,r=(r=i,gsap.to(r,{x:-n,duration:3,ease:"none"}));ScrollTrigger.create({trigger:t,start:"top 30%",end:"+="+n,pin:!0,animation:r,scrub:1,invalidateOnRefresh:!0,id:"expertiseScroll"})});let i=ScrollTrigger.getById("expertiseScroll");i&&(gsap.utils.toArray(".expertise-item:not(.item-title-large)").forEach(e=>{var t=e.querySelector(".item-content");gsap.fromTo(t,{yPercent:70},{yPercent:0,ease:"none",scrollTrigger:{trigger:e,containerAnimation:i.animation,start:"left 80%",end:"center 60%",scrub:!0,invalidateOnRefresh:!0}})}),ScrollTrigger.refresh())}}let init=()=>{gsap.registerPlugin(ScrollTrigger),gsapExpertise(),sectionSpecialize(),clientInsight(),ScrollTrigger.refresh()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});