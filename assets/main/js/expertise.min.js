import{preloadImages}from"../../libs/utils.js";function animateChessItems(){if($(".banner-expertise").length){document.querySelector(".section-banner.banner-expertise"),document.querySelectorAll(".wrapper-chess .chess-item");let n=document.querySelector(".wrapper-chess");var t=/iPhone|iPad|iPod/i.test(navigator.userAgent);let a=window.innerWidth<=991;t=t?window.innerHeight+50:window.innerHeight+100;let e=document.querySelector(".banner-expertise-spacer");e||((e=document.createElement("div")).classList.add("banner-expertise-spacer"),document.querySelector(".banner-expertise").insertAdjacentElement("afterend",e)),window.innerWidth<=991?e.style.height=t+"px":e.style.height=t/2+1+"px";var t=gsap.utils.toArray(".wrapper-chess .chess-item"),s=(gsap.set(t,{y:"120%"}),window.innerWidth<=991?"+=100%":"+=50%");let i=gsap.timeline({scrollTrigger:{trigger:".banner-expertise",start:"top top",end:s,scrub:!0,pin:!0,pinSpacing:!1}}),r=t.length,o=window.innerWidth<991?1:.6;t.forEach((e,t)=>{i.to(e,{y:"0%",duration:o,ease:"none"}),a&&(t=(t+1)*-(50/r),i.to(n,{x:t+"%",duration:1,ease:"power2.out"},">"),i.to(e,{scale:.9,duration:.5,ease:"power2.out"},">"))})}}function buildABrand(){if(!($(".build-a-brand").length<1)){let n=$(".build-a-brand .tab-wrapper .item");n.on("click",function(){var e=$(this),t=e.data("branding");e.hasClass("active")||(n.removeClass("active"),e.addClass("active"),(e=$(".build-a-brand .wrapper-content")).find(".item").addClass("d-none"),0===(e=e.find(`.item[data-branding="${t}"]`)).length?console.warn("Không tìm thấy nội dung cho tab "+t):(e.removeClass("d-none"),0<(e=$(".why-choose-us.page-expertise")).length&&(e.find(".main-section").addClass("d-none"),0<(e=e.find(`.main-section[data-branding="${t}"]`)).length?e.removeClass("d-none"):console.warn("Không tìm thấy main-section cho tab "+t)),a(t)))});var e=window.innerWidth<991?"top 60%":"top 40%";let t=$(".build-a-brand").attr("tab-active")?$(".build-a-brand").attr("tab-active"):"2";function a(e){var t,n=$(`.build-a-brand .wrapper-content .item[data-branding="${e}"]`);0===n.length?console.warn("Không tìm thấy nội dung cho tab "+e):(e=n.find(".h1-heading"),t=n.find(".desc"),n.removeClass("d-none"),n=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),(e=gsap.timeline()).fromTo(n.lines,{opacity:0,yPercent:100},{opacity:1,yPercent:0,duration:.6,stagger:.13,ease:"expo.out"}),e.fromTo(t,{opacity:0,y:20},{opacity:1,y:0,duration:.4,ease:"expo.out"}))}ScrollTrigger.create({trigger:".build-a-brand",start:e,end:"bottom top",onEnter:()=>{var e=t,e=$(`.build-a-brand .tab-wrapper .item[data-branding='${e}']`);e.hasClass("active")||(n.removeClass("active"),e.addClass("active"),(e=$(".build-a-brand .wrapper-content")).find(".item").addClass("d-none"),e.find(`.item[data-branding='${t}']`).removeClass("d-none"),a(t))},onLeaveBack:()=>{n.removeClass("active"),$(".build-a-brand .wrapper-content .item").addClass("d-none")}})}}function introBrading(){document.querySelectorAll(".build-a-brand").length<1||(gsap.registerPlugin(ScrollTrigger,SplitText),window.innerHeight,ScrollTrigger.create({trigger:".build-a-brand",start:"top+=3% top",onEnter:()=>{document.querySelector(".build-a-brand").classList.add("active")},onLeaveBack:()=>{document.querySelector(".build-a-brand").classList.remove("active")}}),$(".section-intro").length&&gsap.to(".section-intro",{scrollTrigger:{trigger:".section-intro",start:"top top",end:"bottom top",pin:!0,pinSpacing:!1}}))}let init=()=>{gsap.registerPlugin(ScrollTrigger),animateChessItems(),buildABrand(),introBrading(),ScrollTrigger.refresh()};preloadImages("img").then(()=>{init()});