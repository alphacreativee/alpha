import{preloadImages}from"../../libs/utils.js";function sliderProject(){if(!($(".swiper-project").length<1)){let e=$(".swiper-project");e.each(function(){var e=$(this),t=new Swiper(e[0],{slidesPerView:1,speed:1e3,init:!0,loopAdditionalSlides:1,autoplay:!1,watchSlidesProgress:!0,mousewheel:{enabled:!0},keyboard:{enabled:!0},pagination:{el:e.find(".swiper-pagination")[0],clickable:!0,renderBullet:function(e,t){return`
            <button class="${t}">
              <span class="progress-bar"></span>
            </button>`}},on:{progress:function(r){r.slides.forEach(function(e){var t=(e.progress||0)*(.8*r.width);isNaN(t)||(e=e.querySelector(".img-parallax"))&&(e.style.transform="translate3d("+t+"px, 0, 0)")})},touchStart:function(e){e.slides.forEach(function(e){e.style.transition=""})},setTransition:function(e,t){var r="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(function(e){e.style.transition=t+"ms "+r;e=e.querySelector(".img-parallax");e&&(e.style.transition=t+"ms "+r)})},slideChangeTransitionStart:function(e){e.params.autoplay.delay=2e3,e.autoplay.start()},slideChangeTransitionEnd:function(e){r(e)}}});e.on("mouseenter",function(){t.autoplay.start({delay:2e3,disableOnInteraction:!1}),r(t)}),e.on("mouseleave",function(){t.autoplay.pause(),t.slideToLoop(0,1e3,!0),setTimeout(()=>{t.autoplay.stop()},1e3)})});var t=gsap.utils.toArray(".project-item");function r(o){o.pagination.bullets.forEach((e,t)=>{let r=e.querySelector(".progress-bar");t<o.realIndex?(e.classList.add("viewed"),r.style.width="100%",r.style.transition="none"):t===o.realIndex?(r.style.width="0%",r.style.transition="none",setTimeout(()=>{r.style.width="100%",r.style.transition=`width ${o.params.autoplay.delay}ms linear`},10)):(e.classList.remove("viewed"),r.style.width="0%",r.style.transition="none")})}gsap.set(t,{yPercent:40,opacity:0}),gsap.set(t[0],{yPercent:10,opacity:0}),gsap.timeline({scrollTrigger:{trigger:".project-list",start:"top 90%",end:"bottom 80%",scrub:1}}).to(t,{yPercent:0,opacity:1,duration:1,ease:"power2.out",stagger:.2})}}function magicCursor(){var t=document.querySelector(".magic-cursor");gsap.set(t,{xPercent:-50,yPercent:-50});let r,o;window.addEventListener("mousemove",e=>{r=e.clientX,o=e.clientY,gsap.to(t,{x:r,y:o,duration:.1})});var s=document.querySelector(".magic-cursor .cursor");document.querySelector(".magic-cursor .cursor .text-content");document.querySelectorAll(".project-item").forEach(e=>{e.addEventListener("mouseenter",()=>{s.classList.add("show")}),e.addEventListener("mouseleave",()=>{s.classList.remove("show")})})}let init=()=>{gsap.registerPlugin(ScrollTrigger),sliderProject(),magicCursor()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});