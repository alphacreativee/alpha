import{preloadImages}from"../../libs/utils.js";function sliderProject(){if(!($(".swiper-project").length<1)){let e=$(".swiper-project");function o(o){o.pagination.bullets.forEach((e,t)=>{let r=e.querySelector(".progress-bar");t<o.realIndex?(e.classList.add("viewed"),r.style.width="100%",r.style.transition="none"):t===o.realIndex?(r.style.width="0%",r.style.transition="none",setTimeout(()=>{r.style.width="100%",r.style.transition=`width ${o.params.autoplay.delay}ms linear`},10)):(e.classList.remove("viewed"),r.style.width="0%",r.style.transition="none")})}e.each(function(){var e=$(this),t=new Swiper(e[0],{slidesPerView:1,speed:1e3,init:!0,loopAdditionalSlides:1,autoplay:!1,watchSlidesProgress:!0,pagination:{el:e.find(".swiper-pagination")[0],clickable:!0,renderBullet:function(e,t){return`
            <button class="${t}">
              <span class="progress-bar"></span>
            </button>`}},on:{progress:function(r){r.slides.forEach(function(e){var t=(e.progress||0)*(.8*r.width);isNaN(t)||(e=e.querySelector(".img-parallax"))&&(e.style.transform="translate3d("+t+"px, 0, 0)")})},touchStart:function(e){e.slides.forEach(function(e){e.style.transition=""})},setTransition:function(e,t){var r="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(function(e){e.style.transition=t+"ms "+r;e=e.querySelector(".img-parallax");e&&(e.style.transition=t+"ms "+r)})},slideChangeTransitionStart:function(e){e.params.autoplay.delay=2e3,e.autoplay.start()},slideChangeTransitionEnd:function(e){o(e)}}}),r=()=>{t.autoplay.start({delay:2e3,disableOnInteraction:!1}),o(t)};e.on("mouseenter",r),window.innerWidth<991&&r(),e.on("mouseleave",function(){t.autoplay.pause(),t.slideToLoop(0,1e3,!0),setTimeout(()=>{t.autoplay.stop()},1e3)})})}}function loadImg(e){let t=gsap.utils.toArray(".project-item",e);gsap.matchMedia().add("(max-width: 991px)",()=>{gsap.set(t,{y:100}),gsap.set(t[0],{y:10}),t.forEach((e,t)=>{gsap.to(e,{y:0,duration:.5,scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 90%"}})})}),gsap.matchMedia().add("(min-width: 992px)",()=>{gsap.set(t,{yPercent:40}),gsap.set(t[0],{yPercent:10}),gsap.timeline({scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 80%",scrub:1}}).to(t,{yPercent:0,duration:1,ease:"power2.out",stagger:.2})})}function changeColor(){if(document.querySelector(".blog-page")){let e=document.querySelector("main");var r=document.querySelector(".blog-page-container .project-list");let t=document.querySelector(".blog-page-container");ScrollTrigger.create({trigger:r,start:"top 75%",end:"bottom 75%",scrub:!0,onEnter:()=>{t.classList.add("theme-light"),e.classList.add("theme-light")},onLeaveBack:()=>{e.classList.remove("theme-light"),t.classList.remove("theme-light")}})}}function magicCursorImg(){if(document.querySelector(".magic-cursor-image")){var o=document.querySelector(".magic-cursor-image");gsap.set(o,{xPercent:-50,yPercent:-50});let t,r;window.addEventListener("mousemove",e=>{t=e.clientX,r=e.clientY,gsap.to(o,{x:t,y:r,duration:.1})});var a=document.querySelector(".magic-cursor-image .cursor"),i=document.querySelector(".magic-cursor-image .img-content");document.querySelectorAll(".porfolio-item .porfolio-link").forEach(t=>{t.addEventListener("mouseenter",()=>{var e=t.getAttribute("data-cursor-image");e&&(a.classList.add("show"),t.classList.add("hovered"),i.innerHTML=`<img src="${e}" alt="cursor image" />`)}),t.addEventListener("mouseleave",()=>{a.classList.remove("show"),t.classList.remove("hovered"),i.innerHTML=""})})}}function galleryZoom(){gsap.registerPlugin(ScrollTrigger,Flip);var e=document.querySelectorAll(".gallery .gallery-item"),t=(e.forEach(e=>e.classList.add("flip")),Flip.getState([".gallery .gallery-item",".gallery .gallery-item .img"],{props:"borderRadius"}));e.forEach(e=>e.classList.remove("flip")),Flip.to(t,{scale:!0,simple:!0,scrollTrigger:{trigger:".gallery",start:"center center",end:"+=300%",scrub:!0,pin:!0,lazy:!1,anticipate:!0}})}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".tab-pane.show.active .project-list");e&&(loadImg(e),ScrollTrigger.refresh())}),document.querySelectorAll('button[data-bs-toggle="pill"]').forEach(e=>{e.addEventListener("shown.bs.tab",function(e){e=e.target.getAttribute("data-bs-target"),e=document.querySelector(e+" .project-list");e&&(loadImg(e),ScrollTrigger.refresh())})});let init=()=>{gsap.registerPlugin(ScrollTrigger),sliderProject(),changeColor(),galleryZoom(),magicCursorImg()};preloadImages("img").then(()=>{init()});