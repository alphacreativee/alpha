import{preloadImages}from"../../libs/utils.js";function ourStory(){if(document.querySelector(".our-story")){gsap.set(".our-story .content:not(:first-child)",{yPercent:100});let o=gsap.utils.toArray(".our-story .content:not(:first-child)"),i=gsap.utils.toArray(".text-wrap .text"),r=gsap.timeline();var t=document.querySelectorAll(".our-story .content")?Array.from(document.querySelectorAll(".our-story .content")).reduce((e,t)=>e+t.offsetHeight,0):0;let e=document.querySelector(".our-story-spacer");e||((e=document.createElement("div")).classList.add("our-story-spacer"),document.querySelector(".our-story").insertAdjacentElement("afterend",e)),e.style.height=t+"px",ScrollTrigger.create({trigger:".our-story",start:"top top",end:"+="+t,pin:!0,scrub:!0,animation:r,pinSpacing:!1,onUpdate:e=>{var e=e.progress,t=1/(o.length+1);let r=Math.floor(e/t);r>=i.length&&(r=i.length-1),i.forEach((e,t)=>{e.classList.toggle("active",t===r)})}}),o.forEach((e,t)=>{r.to(e,{yPercent:0,duration:.5,ease:"power2.out"})})}}function gsapexpertise2(){var e=$(".wrapper-expertise2");if(0<e.length){e.each(function(e,o){let t=$(o).find(".expertise2");let i=()=>{var e=o.querySelectorAll(".expertise2-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)/7};var r=t[0].scrollWidth-window.innerWidth+0,a=((e=>{let t=o.querySelector(".expertise2-spacer");t||((t=document.createElement("div")).classList.add("expertise2-spacer"),o.insertAdjacentElement("afterend",t));var r=i();t.style.height=Math.max(r,e)+"px"})(r),a=t,gsap.to(a,{x:-r,duration:3,ease:"none"}));ScrollTrigger.create({trigger:o,start:"top top",end:"+="+ +r,pin:!0,animation:a,scrub:1,pinSpacing:!1,invalidateOnRefresh:!0,id:"expertise2Scroll-"+e})});let t=ScrollTrigger.getById("expertise2Scroll-0");t&&(gsap.utils.toArray(".expertise2-item:not(.item-title-large)").forEach(e=>{ScrollTrigger.create({trigger:e,containerAnimation:t.animation,start:"left 80%",onEnter:()=>e.classList.add("active"),onLeaveBack:()=>e.classList.remove("active"),invalidateOnRefresh:!0})}),ScrollTrigger.create({trigger:".wrapper-expertise2",start:"top 65%",onEnter:()=>{document.querySelector(".wrapper-expertise2").classList.add("theme-light"),document.querySelector(".header-menu-container").classList.add("theme-light")},onLeaveBack:()=>{document.querySelector(".wrapper-expertise2").classList.remove("theme-light"),document.querySelector(".header-menu-container").classList.remove("theme-light")}}),ScrollTrigger.refresh(),(e=$(".wrapper-expertise2 .expertise2-item .item-content:not(.empty)")).on("mouseenter",function(){$(this).addClass("hover")}),e.on("mouseleave",function(){$(this).removeClass("hover")}))}}function ourTeam(){var e=gsap.utils.toArray(".our-team-item");gsap.set(e,{opacity:0,y:100}),gsap.timeline({scrollTrigger:{trigger:".our-team-list",start:"top 90%",end:"bottom 70%",scrub:1}}).to(e,{opacity:1,y:0,duration:.8,ease:"power2.out",stagger:.15})}function swiperTeam(){if(!($("#modal-teams").length<1)){var e=$("[modal-team]"),t=$("#modal-teams").find(".btn-close");let o=new Swiper(".swiper-team",{slidesPerView:1,effect:"fade",spaceBetween:0,navigation:{nextEl:".swiper-team .swiper-button-next",prevEl:".swiper-team .swiper-button-prev"}});e.on("click",function(e){e.preventDefault();e=$(this).data("slider")||0;$("#modal-teams").addClass("show"),$("body").addClass("overflow-hidden"),o.slideTo(e)}),t.on("click",function(){$("#modal-teams").removeClass("show"),$("body").removeClass("overflow-hidden")});let i;$("#modal-teams").on("wheel",function(e){var t,r;e.preventDefault(),i||(i=setTimeout(()=>{i=null},500),e=e.originalEvent.deltaY,t=o.activeIndex,r=o.slides.length,0<e&&t<r-1?o.slideNext():e<0&&0<t&&o.slidePrev())})}}let init=()=>{gsap.registerPlugin(ScrollTrigger),ourTeam(),ourStory(),gsapexpertise2(),swiperTeam()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});