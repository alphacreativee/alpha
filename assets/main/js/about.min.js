import{preloadImages}from"../../libs/utils.js";function ourStory(){gsap.set(".our-story .content:not(:first-child)",{yPercent:100});let o=gsap.utils.toArray(".our-story .content:not(:first-child)"),i=gsap.utils.toArray(".text"),r=gsap.timeline();var e=document.querySelectorAll(".our-story .content")?Array.from(document.querySelectorAll(".our-story .content")).reduce((e,t)=>e+t.offsetHeight,0):0;let t=document.querySelector(".our-story-spacer");t||((t=document.createElement("div")).classList.add("our-story-spacer"),document.querySelector(".our-story").insertAdjacentElement("afterend",t)),t.style.height=e+"px",ScrollTrigger.create({trigger:".our-story",start:"top top",end:"+="+e,pin:!0,scrub:!0,animation:r,pinSpacing:!1,onUpdate:e=>{var e=e.progress,t=1/(o.length+1);let r=Math.floor(e/t);r>=i.length&&(r=i.length-1),i.forEach((e,t)=>{e.classList.toggle("active",t===r)})}}),o.forEach((e,t)=>{r.to(e,{yPercent:0,duration:.5,boxShadow:"0px 0px 40px rgba(0, 0, 0, 0.4)",ease:"power2.out"})})}function gsapexpertise2(){var e=$(".wrapper-expertise2");if(0<e.length){e.each(function(e,o){let t=$(o).find(".expertise2");let i=()=>{var e=o.querySelectorAll(".expertise2-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)/7};var r=t[0].scrollWidth-window.innerWidth+100,a=((e=>{let t=o.querySelector(".expertise2-spacer");t||((t=document.createElement("div")).classList.add("expertise2-spacer"),o.insertAdjacentElement("afterend",t));var r=i();t.style.height=Math.max(r,e)+"px"})(r),a=t,gsap.to(a,{x:-r,duration:3,ease:"none"}));ScrollTrigger.create({trigger:o,start:"top top",end:"+="+ +r,pin:!0,animation:a,scrub:1,pinSpacing:!1,invalidateOnRefresh:!0,id:"expertise2Scroll-"+e})});let t=ScrollTrigger.getById("expertise2Scroll-0");t&&(gsap.utils.toArray(".expertise2-item:not(.item-title-large)").forEach(e=>{ScrollTrigger.create({trigger:e,containerAnimation:t.animation,start:"left 85%",onEnter:()=>e.classList.add("active"),onLeaveBack:()=>e.classList.remove("active"),invalidateOnRefresh:!0})}),ScrollTrigger.create({trigger:".wrapper-expertise2",start:"top 65%",onEnter:()=>{document.querySelector(".wrapper-expertise2").classList.add("theme-light")},onLeaveBack:()=>{document.querySelector(".wrapper-expertise2").classList.remove("theme-light")}}),ScrollTrigger.refresh())}}function ourTeam(){var e=gsap.utils.toArray(".our-team-item");gsap.set(e,{opacity:0,yPercent:100}),gsap.timeline({scrollTrigger:{trigger:".our-team-list",start:"top 90%",end:"bottom 60%",scrub:1}}).to(e,{opacity:1,y:0,duration:1,ease:"power2.out",stagger:.15})}let init=()=>{gsap.registerPlugin(ScrollTrigger),ourTeam(),ourStory(),gsapexpertise2()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});