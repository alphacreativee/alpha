import{preloadImages}from"../../libs/utils.js";function ourStory(){gsap.set(".our-story .content:not(:first-child)",{yPercent:100});let o=gsap.utils.toArray(".our-story .content:not(:first-child)"),n=gsap.utils.toArray(".text"),r=gsap.timeline();var t=document.querySelectorAll(".our-story .content")?Array.from(document.querySelectorAll(".our-story .content")).reduce((t,e)=>t+e.offsetHeight,0):0;let e=document.querySelector(".our-story-spacer");e||((e=document.createElement("div")).classList.add("our-story-spacer"),document.querySelector(".our-story").insertAdjacentElement("afterend",e)),e.style.height=t+"px",ScrollTrigger.create({trigger:".our-story",start:"top top",end:"+="+t,pin:!0,scrub:!0,animation:r,pinSpacing:!1,onUpdate:t=>{var t=t.progress,e=1/(o.length+1);let r=Math.floor(t/e);r>=n.length&&(r=n.length-1),n.forEach((t,e)=>{t.classList.toggle("active",e===r)})}}),o.forEach((t,e)=>{r.to(t,{yPercent:0,duration:.5,boxShadow:"0px 0px 40px rgba(0, 0, 0, 0.4)",ease:"power2.out"})})}let init=()=>{gsap.registerPlugin(ScrollTrigger),ourStory()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});