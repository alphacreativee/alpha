import{preloadImages}from"../../libs/utils.js";function ourStory(){if(document.querySelector(".our-story")){gsap.set(".our-story .content:not(:first-child)",{yPercent:100});let o=gsap.utils.toArray(".our-story .content:not(:first-child)"),i=gsap.utils.toArray(".text-wrap .text"),r=gsap.timeline();var t=document.querySelectorAll(".our-story .content")?Array.from(document.querySelectorAll(".our-story .content")).reduce((e,t)=>e+t.offsetHeight,0):0;let e=document.querySelector(".our-story-spacer");e||((e=document.createElement("div")).classList.add("our-story-spacer"),document.querySelector(".our-story").insertAdjacentElement("afterend",e)),e.style.height=t+"px",ScrollTrigger.create({trigger:".our-story",start:"top top",end:"+="+t,pin:!0,scrub:!0,animation:r,pinSpacing:!1,onUpdate:e=>{var e=e.progress,t=1/(o.length+1);let r=Math.floor(e/t);r>=i.length&&(r=i.length-1),i.forEach((e,t)=>{e.classList.toggle("active",t===r)})}}),o.forEach((e,t)=>{r.to(e,{yPercent:0,duration:.5,ease:"power2.out"})})}}function gsapexpertise2(){var e=$(".wrapper-expertise2");if(0<e.length){e.each(function(e,o){let t=$(o).find(".expertise2");let i=()=>{var e=o.querySelectorAll(".expertise2-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)/7};var r=t[0].scrollWidth-window.innerWidth+0,n=((e=>{let t=o.querySelector(".expertise2-spacer");t||((t=document.createElement("div")).classList.add("expertise2-spacer"),o.insertAdjacentElement("afterend",t));var r=i();t.style.height=Math.max(r,e)+"px"})(r),n=t,gsap.to(n,{x:-r,duration:3,ease:"none"}));ScrollTrigger.create({trigger:o,start:"top top",end:"+="+ +r,pin:!0,animation:n,scrub:1,pinSpacing:!1,invalidateOnRefresh:!0,id:"expertise2Scroll-"+e})});let t=ScrollTrigger.getById("expertise2Scroll-0");t&&(gsap.utils.toArray(".expertise2-item:not(.item-title-large)").forEach(e=>{ScrollTrigger.create({trigger:e,containerAnimation:t.animation,start:"left 80%",onEnter:()=>e.classList.add("active"),onLeaveBack:()=>e.classList.remove("active"),invalidateOnRefresh:!0})}),ScrollTrigger.create({trigger:".wrapper-expertise2",start:"top 65%",onEnter:()=>{document.querySelector(".wrapper-expertise2").classList.add("theme-light"),document.querySelector(".header-menu-container").classList.add("theme-light")},onLeaveBack:()=>{document.querySelector(".wrapper-expertise2").classList.remove("theme-light"),document.querySelector(".header-menu-container").classList.remove("theme-light")}}),ScrollTrigger.refresh(),(e=$(".wrapper-expertise2 .expertise2-item .item-content:not(.empty)")).on("mouseenter",function(){$(this).addClass("hover")}),e.on("mouseleave",function(){$(this).removeClass("hover")}))}}function ourTeam(){var e=gsap.utils.toArray(".our-team-item");gsap.set(e,{opacity:0,y:100}),991<window.innerWidth?gsap.timeline({scrollTrigger:{trigger:".our-team-list",start:"top 90%",end:"bottom 70%",scrub:1}}).to(e,{opacity:1,y:0,duration:.8,ease:"power2.out",stagger:.15}):e.forEach((e,t)=>{gsap.to(e,{opacity:1,y:0,duration:.8,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"play none none reverse"}})})}function swiperTeam(){if(!($("#modal-teams").length<1)){var e=$("[modal-team]"),t=$("#modal-teams").find(".btn-close");let i=15e3,o=new Swiper(".swiper-team",{slidesPerView:1,effect:"fade",spaceBetween:0,navigation:{nextEl:".swiper-team .swiper-button-next",prevEl:".swiper-team .swiper-button-prev"},pagination:{el:".swiper-team .swiper-pagination",clickable:!0,renderBullet:function(e,t){return`
          <button class="${t}">
            <span class="progress-bar"></span>
          </button>`}},autoplay:window.innerWidth<=991&&{delay:i,disableOnInteraction:!1},on:{slideChangeTransitionStart:function(e){e.params.autoplay&&(e.params.autoplay.delay=i)},slideChangeTransitionEnd:function(e){r(e)},init:function(e){window.innerWidth<=991&&r(e)}}});e.on("click",function(e){e.preventDefault();e=$(this).data("slider")||0;$("#modal-teams").addClass("show"),$("body").addClass("overflow-hidden"),o.slideTo(e),window.innerWidth<=991&&r(o)}),t.on("click",function(){$("#modal-teams").removeClass("show"),$("body").removeClass("overflow-hidden")});let n;function r(o){o.pagination.bullets.forEach((e,t)=>{let r=e.querySelector(".progress-bar");t<o.realIndex?(e.classList.add("viewed"),r.style.width="100%",r.style.transition="none"):t===o.realIndex?(r.style.width="0%",r.style.transition="none",setTimeout(()=>{r.style.width="100%",r.style.transition=`width ${o.params.autoplay.delay||i}ms linear`},10)):(e.classList.remove("viewed"),r.style.width="0%",r.style.transition="none")})}$("#modal-teams").on("wheel",function(e){var t,r;e.preventDefault(),n||(n=setTimeout(()=>{n=null},500),e=e.originalEvent.deltaY,t=o.activeIndex,r=o.slides.length,0<e&&t<r-1?o.slideNext():e<0&&0<t&&o.slidePrev())})}}let init=()=>{gsap.registerPlugin(ScrollTrigger),ourTeam(),ourStory(),gsapexpertise2(),swiperTeam()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});