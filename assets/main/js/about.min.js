import{preloadImages}from"../../libs/utils.js";function coreValue(){if(!($(".core-value").length<1)){var t=window.innerWidth;let e=t-32;991<t?e=t-160:767<t&&(e=t-80);var r=(t-e)/2/t*100,o=document.querySelector(".core-value .core-value__top").offsetHeight,t=(o-(991<t?o-100:o))/2/o*100;gsap.fromTo(".core-value .image",{clipPath:`inset(${t}% ${r}% ${t}% ${r}%)`},{scrollTrigger:{trigger:".core-value .core-value__top",start:"top 70%",end:"bottom 70%",scrub:1},clipPath:"inset(0% 0% 0% 0%)",duration:.4,ease:"power2.out"}),gsap.fromTo(".core-value .image img",{scale:1.1},{scrollTrigger:{trigger:".core-value .core-value__top",start:"top 70%",end:"bottom 70%",scrub:1},scale:1,duration:.4,ease:"power2.out"}),ScrollTrigger.create({trigger:".core-value",start:"top top",end:"bottom top",toggleClass:{targets:".core-value",className:"active"},markers:!1})}}function ourStory(){gsap.set(".content:not(:first-child)",{yPercent:100});let o=gsap.utils.toArray(".content:not(:first-child)"),i=gsap.utils.toArray(".text"),r=gsap.timeline();ScrollTrigger.create({trigger:".our-story",start:"top top",end:"+=1000",pin:!0,scrub:!0,animation:r,onUpdate:e=>{var e=e.progress,t=o.length;let r=Math.floor(e/.4);(r=r>=t?t-1:r)<0&&(r=0),i.forEach((e,t)=>{t===r?e.classList.add("active"):e.classList.remove("active")})}}),o.forEach((e,t)=>{r.to(e,{yPercent:0,duration:.5,ease:"power2.out"})})}function gsapexpertise2(){var e=$(".wrapper-expertise2");if(0<e.length){e.each(function(e,t){let r=$(t).find(".expertise2");var o=r[0].scrollWidth-window.innerWidth+200,i=(i=r,gsap.to(i,{x:-o,duration:3,ease:"none"}));ScrollTrigger.create({trigger:t,start:"top top",end:"+="+o,pin:!0,animation:i,scrub:1,pinSpacing:!0,invalidateOnRefresh:!0,id:"expertise2Scroll"})});let r=ScrollTrigger.getById("expertise2Scroll");if(r){let t=gsap.utils.toArray(".expertise2-item:not(.item-title-large)");t.forEach(e=>{e.querySelector(".item-content");t.forEach(e=>{ScrollTrigger.create({trigger:e,containerAnimation:r.animation,start:"left 85%",onEnter:()=>e.classList.add("active"),onLeaveBack:()=>e.classList.remove("active"),invalidateOnRefresh:!0})})}),ScrollTrigger.refresh()}}}let init=()=>{gsap.registerPlugin(ScrollTrigger),ourStory(),coreValue(),gsapexpertise2()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});